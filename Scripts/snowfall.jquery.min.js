Date.now||(Date.now=function(){return(new Date).getTime()}),function(){"use strict";for(var n,i,r=["webkit","moz"],t=0;t<r.length&&!window.requestAnimationFrame;++t)n=r[t],window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"];!/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)&&window.requestAnimationFrame&&window.cancelAnimationFrame||(i=0,window.requestAnimationFrame=function(n){var t=Date.now(),r=Math.max(i+16,t);return setTimeout(function(){n(i=r)},r-t)},window.cancelAnimationFrame=clearTimeout)}(),function(n){n.snowfall=function(t,i){function g(r,f,o,h){this.x=r;this.y=f;this.size=o;this.speed=h;this.step=0;this.stepSize=u(1,10)/100;i.collection&&(this.target=y[u(0,y.length-1)]);var l=null;i.image?(l=document.createElement("img"),l.src=i.image):(l=document.createElement("div"),n(l).css({background:i.flakeColor}));n(l).attr({"class":"snowfall-flakes"}).css({width:this.size,height:this.size,position:i.flakePosition,top:this.y,left:this.x,fontSize:0,zIndex:i.flakeIndex});n(t).get(0).tagName===n(document).get(0).tagName?(n("body").append(n(l)),t=n("body")):n(t).append(n(l));this.element=l;this.update=function(){if(this.y+=this.speed,this.y>a-(this.size+6)&&this.reset(),this.element.style.top=this.y+"px",this.element.style.left=this.x+"px",this.step+=this.stepSize,this.x+=c===!1?Math.cos(this.step):c+Math.cos(this.step),i.collection&&this.x>this.target.x&&this.x<this.target.width+this.target.x&&this.y>this.target.y&&this.y<this.target.height+this.target.y){var u=this.target.element.getContext("2d"),t=this.x-this.target.x,n=this.y-this.target.y,r=this.target.colData;if(r[parseInt(t)][parseInt(n+this.speed+this.size)]!==undefined||n+this.speed+this.size>this.target.height)if(n+this.speed+this.size>this.target.height){while(n+this.speed+this.size>this.target.height&&this.speed>0)this.speed*=.5;u.fillStyle="#fff";r[parseInt(t)][parseInt(n+this.speed+this.size)]==undefined?(r[parseInt(t)][parseInt(n+this.speed+this.size)]=1,u.fillRect(t,n+this.speed+this.size,this.size,this.size)):(r[parseInt(t)][parseInt(n+this.speed)]=1,u.fillRect(t,n+this.speed,this.size,this.size));this.reset()}else this.speed=1,this.stepSize=0,parseInt(t)+1<this.target.width&&r[parseInt(t)+1][parseInt(n)+1]==undefined?this.x++:parseInt(t)-1>0&&r[parseInt(t)-1][parseInt(n)+1]==undefined?this.x--:(u.fillStyle="#fff",u.fillRect(t,n,this.size,this.size),r[parseInt(t)][parseInt(n)]=1,this.reset())}(this.x+this.size>s-e||this.x<e)&&this.reset()};this.reset=function(){this.y=0;this.x=u(e,s-e);this.stepSize=u(1,10)/100;this.size=u(i.minSize*100,i.maxSize*100)/100;this.element.style.width=this.size+"px";this.element.style.height=this.size+"px";this.speed=u(i.minSpeed,i.maxSpeed)}}function d(){for(r=0;r<l.length;r+=1)l[r].update();w=requestAnimationFrame(function(){d()})}var l=[],i=n.extend({flakeCount:35,flakeColor:"#ffffff",flakePosition:"absolute",flakeIndex:999999,minSize:1,maxSize:2,minSpeed:1,maxSpeed:5,round:!1,shadow:!1,collection:!1,collectionHeight:40,deviceorientation:!1},i),u=function(n,t){return Math.round(n+Math.random()*(t-n))},v,r,h,c;n(t).data("snowfall",this);var r=0,a=n(t).height(),s=n(t).width(),e=0,w=0;if(i.collection!==!1)if(v=document.createElement("canvas"),!(v.getContext&&v.getContext("2d")))i.collection=!1;else{var y=[],b=n(i.collection),o=i.collectionHeight;for(r=0;r<b.length;r++){var f=b[r].getBoundingClientRect(),p=n("<canvas/>",{"class":"snowfall-canvas"}),k=[];if(f.top-o>0){for(n("body").append(p),p.css({position:i.flakePosition,left:f.left+"px",top:f.top-o+"px"}).prop({width:f.width,height:o}),h=0;h<f.width;h++)k[h]=[];y.push({element:p.get(0),x:f.left,y:f.top-o,width:f.width,height:o,colData:k})}}}for(n(t).get(0).tagName===n(document).get(0).tagName&&(e=25),n(window).bind("resize",function(){a=n(t)[0].clientHeight;s=n(t)[0].offsetWidth}),r=0;r<i.flakeCount;r+=1)l.push(new g(u(e,s-e),u(0,a),u(i.minSize*100,i.maxSize*100)/100,u(i.minSpeed,i.maxSpeed)));i.round&&n(".snowfall-flakes").css({"-moz-border-radius":i.maxSize,"-webkit-border-radius":i.maxSize,"border-radius":i.maxSize});i.shadow&&n(".snowfall-flakes").css({"-moz-box-shadow":"1px 1px 1px #555","-webkit-box-shadow":"1px 1px 1px #555","box-shadow":"1px 1px 1px #555"});c=!1;i.deviceorientation&&n(window).bind("deviceorientation",function(n){c=n.originalEvent.gamma*.1});d();this.clear=function(){n(".snowfall-canvas").remove();n(t).children(".snowfall-flakes").remove();cancelAnimationFrame(w)}};n.fn.snowfall=function(t){return typeof t=="object"||t==undefined?this.each(function(){new n.snowfall(this,t)}):typeof t=="string"?this.each(function(){var t=n(this).data("snowfall");t&&t.clear()}):void 0}}(jQuery);
//# sourceMappingURL=snowfall.jquery.min.js.map
