(function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(n){return 0==n?0:0<n?1:-1});var n={subtract:function(n,t){return{x:n.x-t.x,y:n.y-t.y}},dotProduct:function(n,t){return n.x*t.x+n.y*t.y},square:function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},scale:function(n,t){return{x:n.x*t,y:n.y*t}}},c=Math.pow(2,-65),e=function(t,i){for(var v,y=[],o=i.length-1,e=2*o-1,h=[],l=[],s=[],c=[],a=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],f=0;f<=o;f++)h[f]=n.subtract(i[f],t);for(f=0;f<=o-1;f++)l[f]=n.subtract(i[f+1],i[f]),l[f]=n.scale(l[f],3);for(f=0;f<=o-1;f++)for(v=0;v<=o;v++)s[f]||(s[f]=[]),s[f][v]=n.dotProduct(l[f],h[v]);for(f=0;f<=e;f++)c[f]||(c[f]=[]),c[f].y=0,c[f].x=parseFloat(f)/e;for(e=o-1,h=0;h<=o+e;h++)for(f=Math.max(0,h-e),l=Math.min(h,o);f<=l;f++)j=h-f,c[f+j].y+=s[j][f]*a[j][f];for(o=i.length-1,c=r(c,2*o-1,y,0),e=n.subtract(t,i[0]),s=n.square(e),f=a=0;f<c;f++)e=n.subtract(t,u(i,o,y[f],null,null)),e=n.square(e),e<s&&(s=e,a=y[f]);return e=n.subtract(t,i[o]),e=n.square(e),e<s&&(s=e,a=1),{location:a,distance:s}},r=function(n,t,i,f){for(var p=[],w=[],v=[],y=[],h=0,s,l,o,e=Math.sgn(n[0].y),a=1;a<=t;a++)s=Math.sgn(n[a].y),s!=e&&h++,e=s;switch(h){case 0:return 0;case 1:if(64<=f)return i[0]=(n[0].x+n[t].x)/2,1;for(h=n[0].y-n[t].y,e=n[t].x-n[0].x,a=n[0].x*n[t].y-n[t].x*n[0].y,s=max_distance_below=0,l=1;l<t;l++)o=h*n[l].x+e*n[l].y+a,o>s?s=o:o<max_distance_below&&(max_distance_below=o);if(o=e,l=0*o-1*h,s=(1*(a-s)-0*o)*(1/l),o=e,e=a-max_distance_below,l=0*o-1*h,h=(1*e-0*o)*(1/l),e=Math.min(s,h),Math.max(s,h)-e<c)return v=n[t].x-n[0].x,y=n[t].y-n[0].y,i[0]=0+1*(v*(n[0].y-0)-y*(n[0].x-0))*(1/(0*v-1*y)),1}for(u(n,t,.5,p,w),n=r(p,t,v,f+1),t=r(w,t,y,f+1),f=0;f<n;f++)i[f]=v[f];for(f=0;f<t;f++)i[f+n]=y[f];return n+t},u=function(n,t,i,r,u){for(var e=[[]],f=0;f<=t;f++)e[0][f]=n[f];for(n=1;n<=t;n++)for(f=0;f<=t-n;f++)e[n]||(e[n]=[]),e[n][f]||(e[n][f]={}),e[n][f].x=(1-i)*e[n-1][f].x+i*e[n-1][f+1].x,e[n][f].y=(1-i)*e[n-1][f].y+i*e[n-1][f+1].y;if(null!=r)for(f=0;f<=t;f++)r[f]=e[f][0];if(null!=u)for(f=0;f<=t;f++)u[f]=e[t-f][f];return e[t][0]},o={},t=function(n,t){var i,u=n.length-1,e,c,f;if(i=o[u],!i){i=[];var s=function(n){return function(){return n}},h=function(){return function(n){return n}},r=function(){return function(n){return 1-n}},l=function(n){return function(t){for(var r=1,i=0;i<n.length;i++)r*=n[i](t);return r}};for(i.push(new function(){return function(n){return Math.pow(n,u)}}),e=1;e<u;e++){for(c=[new s(u)],f=0;f<u-e;f++)c.push(new h);for(f=0;f<e;f++)c.push(new r);i.push(new l(c))}i.push(new function(){return function(n){return Math.pow(1-n,u)}});o[u]=i}for(r=h=s=0;r<n.length;r++)s+=n[r].x*i[r](t),h+=n[r].y*i[r](t);return{x:s,y:h}},s=function(n,t){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},h=function(n){return n[0].x==n[1].x&&n[0].y==n[1].y},i=function(n,i,r){if(h(n))return{point:n[0],location:i};for(var f=t(n,i),e=0,o=0<r?1:-1,u=null;e<Math.abs(r);)i+=.005*o,u=t(n,i),e+=s(u,f),f=u;return{point:u,location:i}},f=function(n,i){var r=t(n,i),u=t(n.slice(0,n.length-1),i),f=u.y-r.y,r=u.x-r.x;return 0==f?Infinity:Math.atan(f/r)};window.jsBezier={distanceFromCurve:e,gradientAtPoint:f,gradientAtPointAlongCurveFrom:function(n,t,r){return t=i(n,t,r),1<t.location&&(t.location=1),0>t.location&&(t.location=0),f(n,t.location)},nearestPointOnCurve:function(n,t){var i=e(n,t);return{point:u(t,t.length-1,i.location,null,null),location:i.location}},pointOnCurve:t,pointAlongCurveFrom:function(n,t,r){return i(n,t,r).point},perpendicularToCurveAt:function(n,t,r,u){return t=i(n,t,null==u?0:u),n=f(n,t.location),u=Math.atan(-1/n),n=r/2*Math.sin(u),r=r/2*Math.cos(u),[{x:t.point.x+r,y:t.point.y+n},{x:t.point.x-r,y:t.point.y-n}]},locationAlongCurveFrom:function(n,t,r){return i(n,t,r).location},getLength:function(n){if(h(n))return 0;for(var u=t(n,0),f=0,i=0,r=null;1>i;)i+=.005,r=t(n,i),f+=s(r,u),u=r;return f}}})();
//# sourceMappingURL=jsBezier-0.6-min.min.js.map
