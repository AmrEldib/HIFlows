(function(){"use strict";var i=function(n,t){var i=!1;return{drag:function(){if(i)return i=!1,!0;var r=jsPlumb.getUIPosition(arguments,t.getZoom());n.element&&(jsPlumbAdapter.setPosition(n.element,r),t.repaint(n.element,r))},stopDrag:function(){i=!0}}},r=function(n,t){var i=document.createElement("div"),u,r;i.style.position="absolute";u=t.getContainer()||document.body;u.appendChild(i);r=t.getId(i);t.manage(r,i);n.id=r;n.element=i},u=function(n,t,i,r,u,f,e,o){var s=new jsPlumb.FloatingAnchor({reference:t,referenceCanvas:r,jsPlumbInstance:f});return e({paintStyle:n,endpoint:i,anchor:s,source:u,scope:o})},n=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],f=function(n,t){var r=0,i;if(t!=null)for(i=0;i<n.connections.length;i++)if(n.connections[i].sourceId==t||n.connections[i].targetId==t){r=i;break}return n.connections[r]},t=function(n,t){return jsPlumbUtil.findWithFunction(t.connections,function(t){return t.id==n.id})};jsPlumb.Endpoint=function(e){var o=e._jsPlumb,c=jsPlumb.getElementObject,s=jsPlumbUtil,b=e.newConnection,y=e.newEndpoint,k=e.finaliseConnection,d=e.fireMoveEvent,h,l,p,a,v,w;return this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.getDefaultType=function(){return{parameters:{},scope:null,maxConnections:this._jsPlumb.instance.Defaults.MaxConnections,paintStyle:this._jsPlumb.instance.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,endpoint:this._jsPlumb.instance.Defaults.Endpoint||jsPlumb.Defaults.Endpoint,hoverPaintStyle:this._jsPlumb.instance.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,overlays:this._jsPlumb.instance.Defaults.EndpointOverlays||jsPlumb.Defaults.EndpointOverlays,connectorStyle:e.connectorStyle,connectorHoverStyle:e.connectorHoverStyle,connectorClass:e.connectorClass,connectorHoverClass:e.connectorHoverClass,connectorOverlays:e.connectorOverlays,connector:e.connector,connectorTooltip:e.connectorTooltip}},this._jsPlumb.enabled=!(e.enabled===!1),this._jsPlumb.visible=!0,this.element=jsPlumb.getDOMElement(e.source),this._jsPlumb.uuid=e.uuid,this._jsPlumb.floatingEndpoint=null,h=null,this._jsPlumb.uuid&&(e.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=e.elementId,this._jsPlumb.connectionCost=e.connectionCost,this._jsPlumb.connectionsDirected=e.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={},l=function(){var n=this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();jsPlumbAdapter.updateClasses(this.element,o.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass,o.endpointAnchorClassPrefix+"_"+n);this.updateClasses(o.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass,o.endpointAnchorClassPrefix+"_"+n)}.bind(this),this.setAnchor=function(n,t){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=this._jsPlumb.instance.makeAnchor(n,this.elementId,o),l(),this.anchor.bind("anchorChanged",function(n){this.fire("anchorChanged",{endpoint:this,anchor:n});l()}.bind(this)),t||this._jsPlumb.instance.repaint(this.elementId),this},p=e.anchor?e.anchor:e.anchors?e.anchors:o.Defaults.Anchor||"Top",this.setAnchor(p,!0),a=function(n){if(this.connections.length>0)for(var t=0;t<this.connections.length;t++)this.connections[t].setHover(n,!1);else this.setHover(n)}.bind(this),this.bind("mouseover",function(){a(!0)}),this.bind("mouseout",function(){a(!1)}),e._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.setEndpoint=function(n){this.endpoint!=null&&(this.endpoint.cleanup(),this.endpoint.destroy());var i=function(n,t){var i=o.getRenderMode();if(jsPlumb.Endpoints[i][n])return new jsPlumb.Endpoints[i][n](t);if(!o.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+n+"'"};},t={_jsPlumb:this._jsPlumb.instance,cssClass:e.cssClass,container:e.container,tooltip:e.tooltip,connectorTooltip:e.connectorTooltip,endpoint:this};s.isString(n)?this.endpoint=i(n,t):s.isArray(n)?(t=s.merge(n[1],t),this.endpoint=i(n[0],t)):this.endpoint=n.clone();this.endpoint.clone=function(){return s.isString(n)?i(n,t):s.isArray(n)?(t=s.merge(n[1],t),i(n[0],t)):void 0}.bind(this);this.type=this.endpoint.type},this.setEndpoint(e.endpoint||o.Defaults.Endpoint||jsPlumb.Defaults.Endpoint||"Dot"),this.setPaintStyle(e.endpointStyle||e.paintStyle||e.style||o.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,!0),this.setHoverPaintStyle(e.endpointHoverStyle||e.hoverPaintStyle||o.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,!0),this._jsPlumb.paintStyleInUse=this.getPaintStyle(),jsPlumb.extend(this,e,n),this.isSource=e.isSource||!1,this.isTemporarySource=e.isTemporarySource||!1,this.isTarget=e.isTarget||!1,this._jsPlumb.maxConnections=e.maxConnections||o.Defaults.MaxConnections,this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.addClass(o.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),jsPlumbAdapter.addClass(this.element,o.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.connections=e.connections||[],this.connectorPointerEvents=e["connector-pointer-events"],this.scope=e.scope||o.getDefaultScope(),this.timestamp=null,this.reattachConnections=e.reattach||o.Defaults.ReattachConnections,this.connectionsDetachable=o.Defaults.ConnectionsDetachable,(e.connectionsDetachable===!1||e.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=e.dragAllowedWhenFull!==!1,e.onMaxConnections&&this.bind("maxConnections",e.onMaxConnections),this.addConnection=function(n){this.connections.push(n);this[(this.connections.length>0?"add":"remove")+"Class"](o.endpointConnectedClass);this[(this.isFull()?"add":"remove")+"Class"](o.endpointFullClass)},this.detachFromConnection=function(n,i,r){i=i==null?t(n,this):i;i>=0&&(this.connections.splice(i,1),this[(this.connections.length>0?"add":"remove")+"Class"](o.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](o.endpointFullClass));!r&&this._deleteOnDetach&&this.connections.length===0&&o.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!1})},this.detach=function(n,i,r,u,f,e,s){var c=s==null?t(n,this):s,h=!1;return u=u!==!1,c>=0&&(r||n._forceDetach||n.isDetachable()&&n.isDetachAllowed(n)&&this.isDetachAllowed(n)&&o.checkCondition("beforeDetach",n))&&(o.deleteObject({connection:n,fireEvent:!i&&u,originalEvent:f,deleteAttachedObjects:!1}),h=!0),h},this.detachAll=function(n,t){while(this.connections.length>0)this.detach(this.connections[0],!1,!0,n!==!1,t,this,0);return this},this.detachFrom=function(n,t,i){for(var u,f=[],r=0;r<this.connections.length;r++)(this.connections[r].endpoints[1]==n||this.connections[r].endpoints[0]==n)&&f.push(this.connections[r]);for(u=0;u<f.length;u++)this.detach(f[u],!1,!0,t,i);return this},this.getElement=function(){return this.element},this.setElement=function(n){var t=this._jsPlumb.instance.getId(n),i=this.elementId;return s.removeWithFunction(e.endpointsByElement[this.elementId],function(n){return n.id==this.id}.bind(this)),this.element=jsPlumb.getDOMElement(n),this.elementId=o.getId(this.element),o.anchorManager.rehomeEndpoint(this,i,this.element),o.dragManager.endpointAdded(this.element),s.addToList(e.endpointsByElement,t,this),this},this.makeInPlaceCopy=function(){var n=this.anchor.getCurrentLocation({element:this}),t=this.anchor.getOrientation(this),i=this.anchor.getCssClass(),r={bind:function(){},compute:function(){return[n[0],n[1]]},getCurrentLocation:function(){return[n[0],n[1]]},getOrientation:function(){return t},getCssClass:function(){return i}};return y({dropOptions:e.dropOptions,anchor:r,source:this.element,paintStyle:this.getPaintStyle(),endpoint:e.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope})},this.connectorSelector=function(){var n=this.connections[0];return this.isTarget&&n?n:this.connections.length<this._jsPlumb.maxConnections||this._jsPlumb.maxConnections==-1?null:n},this.setStyle=this.setPaintStyle,this.paint=function(n){var t,l,c,u,e,a,v,r,i,h;if(n=n||{},t=n.timestamp,l=!(n.recalc===!1),(!t||this.timestamp!==t)&&(c=o.updateOffset({elId:this.elementId,timestamp:t}),u=n.offset?n.offset.o:c.o,u!=null)){if(e=n.anchorPoint,a=n.connectorPaintStyle,e==null){if(v=n.dimensions||c.s,r={xy:[u.left,u.top],wh:v,element:this,timestamp:t},l&&this.anchor.isDynamic&&this.connections.length>0){var s=f(this,n.elementWithPrecedence),y=s.endpoints[0]==this?1:0,b=y===0?s.sourceId:s.targetId,p=o.getCachedData(b),w=p.o,k=p.s;r.txy=[w.left,w.top];r.twh=k;r.tElement=s.endpoints[y]}e=this.anchor.compute(r)}for(this.endpoint.compute(e,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,a||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=t,i=0;i<this._jsPlumb.overlays.length;i++)h=this._jsPlumb.overlays[i],h.isVisible()&&(this._jsPlumb.overlayPlacements[i]=h.draw(this.endpoint,this._jsPlumb.paintStyleInUse),h.paint(this._jsPlumb.overlayPlacements[i]))}},this.repaint=this.paint,v=!1,this.initDraggable=function(){if(!v&&jsPlumb.isDragSupported(this.element)){var t={id:null,element:null},n=null,a=!1,l=null,p=i(t,o),f=e.dragOptions||{},w=jsPlumb.dragEvents.start,k=jsPlumb.dragEvents.stop,d=jsPlumb.dragEvents.drag,g=function(){var f,w,i,k,d;if(n=this.connectorSelector(),f=!0,this.isEnabled()||(f=!1),n!=null||this.isSource||this.isTemporarySource||(f=!1),this.isSource&&this.isFull()&&!this.dragAllowedWhenFull&&(f=!1),n==null||n.isDetachable()||(f=!1),f===!1)return o.stopDrag&&o.stopDrag(this.canvas),p.stopDrag(),!1;for(w=0;w<this.connections.length;w++)this.connections[w].setHover(!1);this.addClass("endpointDrag");o.setConnectionBeingDragged(!0);n&&!this.isFull()&&this.isSource&&(n=null);o.updateOffset({elId:this.elementId});h=this.makeInPlaceCopy();h.referenceEndpoint=this;h.paint();r(t,o);var g=c(h.canvas),nt=jsPlumbAdapter.getOffset(g,this._jsPlumb.instance),v=c(this.canvas);jsPlumbAdapter.setPosition(t.element,nt);this.parentAnchor&&(this.anchor=o.makeAnchor(this.parentAnchor,this.elementId,o));o.setAttribute(this.canvas,"dragId",t.id);o.setAttribute(this.canvas,"elId",this.elementId);this._jsPlumb.floatingEndpoint=u(this.getPaintStyle(),this.anchor,this.endpoint,this.canvas,t.element,o,y,this.scope);this.canvas.style.visibility="hidden";n==null?(this.anchor.locked=!0,this.setHover(!1,!1),n=b({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.endpointWillMoveTo||this.element,target:t.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:e.connectorStyle,hoverPaintStyle:e.connectorHoverStyle,connector:e.connector,overlays:e.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass}),n.addClass(o.draggingClass),this._jsPlumb.floatingEndpoint.addClass(o.draggingClass),o.fire("connectionDrag",n)):(a=!0,n.setHover(!1),i=n.endpoints[0].id==this.id?0:1,this.detachFromConnection(n,null,!0),k=o.getDragScope(v),o.setAttribute(this.canvas,"originalScope",k),d=o.getDropScope(v),o.setDragScope(v,d),o.fire("connectionDrag",n),i===0?(l=[n.source,n.sourceId,v,k],n.source=t.element,n.sourceId=t.id):(l=[n.target,n.targetId,v,k],n.target=t.element,n.targetId=t.id),n.endpoints[i===0?1:0].anchor.locked=!0,n.suspendedEndpoint=n.endpoints[i],n.suspendedElement=n.endpoints[i].getElement(),n.suspendedElementId=n.endpoints[i].elementId,n.suspendedElementType=i===0?"source":"target",n.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=n.suspendedEndpoint,n.endpoints[i]=this._jsPlumb.floatingEndpoint,n.addClass(o.draggingClass),this._jsPlumb.floatingEndpoint.addClass(o.draggingClass));o.floatingConnections[t.id]=n;o.anchorManager.addFloatingConnection(t.id,n);s.addToList(e.endpointsByElement,t.id,this._jsPlumb.floatingEndpoint);o.currentlyDragging=!0}.bind(this),nt=function(){var r,i,u;o.setConnectionBeingDragged(!1);n&&n.endpoints!=null&&(r=o.getDropEvent(arguments),i=o.getFloatingAnchorIndex(n),n.endpoints[i===0?1:0].anchor.locked=!1,n.removeClass(o.draggingClass),this._jsPlumb&&(n.deleteConnectionNow||n.endpoints[i]==this._jsPlumb.floatingEndpoint)&&a&&n.suspendedEndpoint&&(i===0?(n.source=l[0],n.sourceId=l[1]):(n.target=l[0],n.targetId=l[1]),u=this._jsPlumb.floatingEndpoint,o.setDragScope(l[2],l[3]),n.endpoints[i]=n.suspendedEndpoint,n.isReattach()||n._forceReattach||n._forceDetach||!n.endpoints[i===0?1:0].detach(n,!1,!1,!0,r)?(n.setHover(!1),n._forceDetach=null,n._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(n),n.suspendedEndpoint.addConnection(n),o.repaint(l[1])):o.deleteObject({endpoint:u})),o.remove(t.element,!1),o.deleteObject({endpoint:h}),this.deleteAfterDragStop?o.deleteObject({endpoint:this}):this._jsPlumb&&(this._jsPlumb.floatingEndpoint=null,this.canvas.style.visibility="visible",this.anchor.locked=!1,this.paint({recalc:!1})),o.fire("connectionDragStop",n,r),o.currentlyDragging=!1,n=null)}.bind(this);f=jsPlumb.extend({},f);f.scope=this.scope||f.scope;f[w]=s.wrap(f[w],g,!1);f[d]=s.wrap(f[d],p.drag);f[k]=s.wrap(f[k],nt);f.canDrag=function(){return this.isSource||this.isTemporarySource||this.isTarget&&this.connections.length>0}.bind(this);o.initDraggable(this.canvas,f,"internal");this.canvas._jsPlumbRelatedElement=this.element;v=!0}},(this.isSource||this.isTarget||this.isTemporarySource)&&this.initDraggable(),w=function(n,t,i,r){var u;if((this.isTarget||t)&&jsPlumb.isDropSupported(this.element)){u=e.dropOptions||o.Defaults.DropOptions||jsPlumb.Defaults.DropOptions;u=jsPlumb.extend({},u);u.scope=u.scope||this.scope;var h=jsPlumb.dragEvents.drop,c=jsPlumb.dragEvents.over,l=jsPlumb.dragEvents.out,f=this,a=o.EndpointDropHandler({getEndpoint:function(){return f},jsPlumb:o,enabled:function(){return r!=null?r.isEnabled():!0},isFull:function(){return r.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(n){f.addClass(n)},removeClass:function(n){f.removeClass(n)},isDropAllowed:function(){return f.isDropAllowed.apply(f,arguments)}});u[h]=s.wrap(u[h],a);u[c]=s.wrap(u[c],function(){var u=jsPlumb.getDragObject(arguments),f=o.getAttribute(jsPlumb.getDOMElement(u),"dragId"),n=o.floatingConnections[f],t,r,i;n!=null&&(t=o.getFloatingAnchorIndex(n),r=this.isTarget&&t!==0||n.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==n.suspendedEndpoint.id,r&&(i=o.checkCondition("checkDropAllowed",{sourceEndpoint:n.endpoints[t],targetEndpoint:this,connection:n}),this[(i?"add":"remove")+"Class"](o.endpointDropAllowedClass),this[(i?"remove":"add")+"Class"](o.endpointDropForbiddenClass),n.endpoints[t].anchor.over(this.anchor,this)))}.bind(this));u[l]=s.wrap(u[l],function(){var i=jsPlumb.getDragObject(arguments),r=i==null?null:o.getAttribute(jsPlumb.getDOMElement(i),"dragId"),n=r?o.floatingConnections[r]:null,t,u;n!=null&&(t=o.getFloatingAnchorIndex(n),u=this.isTarget&&t!==0||n.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==n.suspendedEndpoint.id,u&&(this.removeClass(o.endpointDropAllowedClass),this.removeClass(o.endpointDropForbiddenClass),n.endpoints[t].anchor.out()))}.bind(this));o.initDroppable(n,u,"internal",i)}}.bind(this),this.anchor.isFloating||w(c(this.canvas),!0,!(e._transient||this.anchor.isFloating),this),e.type&&this.addType(e.type,e.data,o.isSuspendDrawing()),this};jsPlumbUtil.extend(jsPlumb.Endpoint,OverlayCapableJsPlumbUIComponent,{getTypeDescriptor:function(){return"endpoint"},isVisible:function(){return this._jsPlumb.visible},setVisible:function(n,t,i){var r,u;if(this._jsPlumb.visible=n,this.canvas&&(this.canvas.style.display=n?"block":"none"),this[n?"showOverlays":"hideOverlays"](),!t)for(r=0;r<this.connections.length;r++)this.connections[r].setVisible(n),i||(u=this===this.connections[r].endpoints[0]?1:0,this.connections[r].endpoints[u].connections.length==1&&this.connections[r].endpoints[u].setVisible(n,!0,!0))},getAttachedElements:function(){return this.connections},applyType:function(t){this.setPaintStyle(t.endpointStyle||t.paintStyle);this.setHoverPaintStyle(t.endpointHoverStyle||t.hoverPaintStyle);t.maxConnections!=null&&(this._jsPlumb.maxConnections=t.maxConnections);t.scope&&(this.scope=t.scope);jsPlumb.extend(this,t,n);t.anchor&&(this.anchor=this._jsPlumb.instance.makeAnchor(t.anchor));t.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,t.cssClass)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(n){this._jsPlumb.enabled=n},cleanup:function(){jsPlumbAdapter.removeClass(this.element,this._jsPlumb.instance.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass);this.anchor=null;this.endpoint.cleanup();this.endpoint.destroy();this.endpoint=null;var n=jsPlumb.getElementObject(this.canvas);this._jsPlumb.instance.destroyDraggable(n,"internal");this._jsPlumb.instance.destroyDroppable(n,"internal")},setHover:function(n){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(n)},isFull:function(){return!(this.isFloating()||this._jsPlumb.maxConnections<1||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return this.anchor!=null&&this.anchor.isFloating},isConnectedTo:function(n){var i=!1,t;if(n)for(t=0;t<this.connections.length;t++)if(this.connections[t].endpoints[1]==n||this.connections[t].endpoints[0]==n){i=!0;break}return i},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(n){this._jsPlumb.connectionCost=n},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(n){this._jsPlumb.connectionsDirected=n},setElementId:function(n){this.elementId=n;this.anchor.elementId=n},setReferenceElement:function(n){this.element=jsPlumb.getDOMElement(n)},setDragAllowedWhenFull:function(n){this.dragAllowedWhenFull=n},equals:function(n){return this.anchor.equals(n.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(n){return this.anchor.compute(n)}});jsPlumbInstance.prototype.EndpointDropHandler=function(n){return function(t){var r=n.jsPlumb,f,c,u,e,l,a;n.removeClass(r.endpointDropAllowedClass);n.removeClass(r.endpointDropForbiddenClass);var s=r.getDropEvent(arguments),o=r.getDOMElement(r.getDragObject(arguments)),v=r.getAttribute(o,"dragId"),y=r.getAttribute(o,"elId"),h=r.getAttribute(o,"originalScope"),i=r.floatingConnections[v];if(i!=null){if(f=n.getEndpoint(i),n.onDrop)n.onDrop(i);if(c=i.suspendedEndpoint&&(i.suspendedEndpoint.id==f.id||f.referenceEndpoint&&i.suspendedEndpoint.id==f.referenceEndpoint.id),c){i._forceReattach=!0;i.setHover(!1);return}u=r.getFloatingAnchorIndex(i);h&&r.setDragScope(o,h);n.isFull(t)&&f.fire("maxConnections",{endpoint:this,connection:i,maxConnections:f._jsPlumb.maxConnections},s);n.isFull()||u===0&&!n.isSource||u==1&&!n.isTarget||!n.enabled()||(e=!0,i.suspendedEndpoint&&i.suspendedEndpoint.id!=f.id&&(i.isDetachAllowed(i)&&i.endpoints[u].isDetachAllowed(i)&&i.suspendedEndpoint.isDetachAllowed(i)&&r.checkCondition("beforeDetach",i)||(e=!1)),u===0?(i.source=n.element,i.sourceId=n.elementId):(i.target=n.element,i.targetId=n.elementId),l=function(){var n,t,e,o;i.endpoints[u].detachFromConnection(i);i.suspendedEndpoint&&i.suspendedEndpoint.detachFromConnection(i);i.endpoints[u]=f;f.addConnection(i);n=f.getParameters();for(t in n)i.setParameter(t,n[t]);i.suspendedEndpoint?(e=i.suspendedEndpoint.elementId,r.fireMoveEvent({index:u,originalSourceId:u===0?e:i.sourceId,newSourceId:u===0?f.elementId:i.sourceId,originalTargetId:u==1?e:i.targetId,newTargetId:u==1?f.elementId:i.targetId,originalSourceEndpoint:u===0?i.suspendedEndpoint:i.endpoints[0],newSourceEndpoint:u===0?f:i.endpoints[0],originalTargetEndpoint:u==1?i.suspendedEndpoint:i.endpoints[1],newTargetEndpoint:u==1?f:i.endpoints[1],connection:i},s)):n.draggable&&r.initDraggable(this.element,dragOptions,"internal",r);u==1?r.anchorManager.updateOtherEndpoint(i.sourceId,i.suspendedElementId,i.targetId,i):r.anchorManager.sourceChanged(i.suspendedEndpoint.elementId,i.sourceId,i);i.endpoints[0].finalEndpoint&&(o=i.endpoints[0],o.detachFromConnection(i),i.endpoints[0]=i.endpoints[0].finalEndpoint,i.endpoints[0].addConnection(i));r.finaliseConnection(i,null,s);i.setHover(!1)}.bind(this),a=function(){i.suspendedEndpoint&&(i.endpoints[u]=i.suspendedEndpoint,i.setHover(!1),i._forceDetach=!0,u===0?(i.source=i.suspendedEndpoint.element,i.sourceId=i.suspendedEndpoint.elementId):(i.target=i.suspendedEndpoint.element,i.targetId=i.suspendedEndpoint.elementId),i.suspendedEndpoint.addConnection(i),r.repaint(i.sourceId),i._forceDetach=!1)},e=e&&n.isDropAllowed(i.sourceId,i.targetId,i.scope,i,f),e?l():a());r.currentlyDragging=!1}}}})();
//# sourceMappingURL=endpoint.min.js.map
