(function(){"use strict";var a={android:navigator.userAgent.toLowerCase().indexOf("android")>-1},i=function(n,t,i){var u,r;for(i=i||n.parentNode,u=i.querySelectorAll(t),r=0;r<u.length;r++)if(u[r]===n)return!0;return!1},u=function(n){return typeof n=="string"?document.getElementById(n):n},r=function(n){return n.srcElement||n.target},v=function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]==t)break;i<n.length&&n.splice(i,1)},d=1,y=function(n,t,i){var r=d++;return n.__ta=n.__ta||{},n.__ta[t]=n.__ta[t]||{},n.__ta[t][r]=i,i.__tauid=r,r},g=function(n,t,i){if(n.__ta&&n.__ta[t]&&delete n.__ta[t][i.__tauid],i.__taExtra){for(var r=0;r<i.__taExtra.length;r++)l(n,i.__taExtra[r][0],i.__taExtra[r][1]);i.__taExtra.length=0}i.__taUnstore&&i.__taUnstore()},f=function(n,t,u,f){if(n==null)return u;var o=n.split(","),e=function(n){var s,f;for(e.__tauid=u.__tauid,s=r(n),f=0;f<o.length;f++)i(s,o[f],t)&&u.apply(s,arguments)};return nt(u,f,e),e},nt=function(n,t,i){n.__taExtra=n.__taExtra||[];n.__taExtra.push([t,i])},n=function(n,i,r,u){h&&t[i]?o(n,t[i],f(u,n,r,t[i]),r):o(n,i,f(u,n,r,i),r)},tt=function(t,i,u,f){if(t.__taSmartClicks==null){var o=function(n){t.__tad=e(n)},s=function(n){t.__tau=e(n)},h=function(n){if(t.__tad&&t.__tau&&t.__tad[0]===t.__tau[0]&&t.__tad[1]===t.__tau[1])for(var i=0;i<t.__taSmartClicks.length;i++)t.__taSmartClicks[i].apply(r(n),[n])};n(t,"mousedown",o,f);n(t,"mouseup",s,f);n(t,"click",h,f);t.__taSmartClicks=[]}t.__taSmartClicks.push(u);u.__taUnstore=function(){v(t.__taSmartClicks,u)}},p={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},it=function(t,u){return function(f,e,o,s){if(e=="contextmenu"&&ut)n(f,e,o,s);else{if(f.__taTapHandler==null){var h=f.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},c=function(n){for(var e=n.srcElement||n.target,r=0;r<h.downSelectors.length;r++)if(h.downSelectors[r]==null||i(e,h.downSelectors[r],f)){h.down=!0;setTimeout(a,t);setTimeout(y,u);break}},l=function(n){var o,s,t,e,u;if(h.down){o=n.srcElement||n.target;h.taps++;s=ht(n);for(t in p)if(e=p[t],e.touches===s&&(e.taps===1||e.taps===h.taps))for(u=0;u<h[t].length;u++)(h[t][u][1]==null||i(o,h[t][u][1],f))&&h[t][u][0].apply(r(n),[n])}},a=function(){h.down=!1},y=function(){h.taps=0};n(f,"mousedown",c);n(f,"mouseup",l)}f.__taTapHandler.downSelectors.push(s);f.__taTapHandler[e].push([o,s]);o.__taUnstore=function(){v(f.__taTapHandler[e],o)}}}},w=function(n,t,i,r){for(var u in i.__tamee[n])i.__tamee[n][u].apply(r,[t])},rt=function(){var n=[];return function(t,u,e,s){if(!t.__tamee){t.__tamee={over:!1,mouseenter:[],mouseexit:[]};var h=function(u){var f=r(u);(s!=null||f!=t||t.__tamee.over)&&(!i(f,s,t)||f.__tamee!=null&&f.__tamee.over)||(w("mouseenter",u,t,f),f.__tamee=f.__tamee||{},f.__tamee.over=!0,n.push(f))},c=function(u){for(var f=r(u),e=0;e<n.length;e++)f!=n[e]||i(u.relatedTarget||u.toElement,"*",f)||(f.__tamee.over=!1,n.splice(e,1),w("mouseexit",u,t,f))};o(t,"mouseover",f(s,t,h,"mouseover"),h);o(t,"mouseout",f(s,t,c,"mouseout"),c)}e.__taUnstore=function(){delete t.__tamee[u][e.__tauid]};y(t,u,e);t.__tamee[u][e.__tauid]=e}},h="ontouchstart"in document.documentElement,ut="onmousedown"in document.documentElement,t={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},b=function(){var n=-1,t,i;return navigator.appName=="Microsoft Internet Explorer"&&(t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),i.exec(t)!=null&&(n=parseFloat(RegExp.$1))),n}(),ft=b>-1&&b<9,c=function(n,t){if(n==null)return[0,0];var r=k(n),i=st(r,0);return[i[t+"X"],i[t+"Y"]]},e=function(n){return n==null?[0,0]:ft?[n.clientX+document.documentElement.scrollLeft,n.clientY+document.documentElement.scrollTop]:c(n,"page")},et=function(n){return c(n,"screen")},ot=function(n){return c(n,"client")},st=function(n,t){return n.item?n.item(t):n[t]},k=function(n){return n.touches&&n.touches.length>0?n.touches:n.changedTouches&&n.changedTouches.length>0?n.changedTouches:n.targetTouches&&n.targetTouches.length>0?n.targetTouches:[n]},ht=function(n){return k(n).length},o=function(n,t,i,r){if(y(n,t,i),r.__tauid=i.__tauid,n.addEventListener)n.addEventListener(t,i,!1);else if(n.attachEvent){var u=t+i.__tauid;n["e"+u]=i;n[u]=function(){n["e"+u]&&n["e"+u](window.event)};n.attachEvent("on"+t,n[u])}},l=function(n,t,i){i!=null&&s(n,function(){var n=u(this),r;g(n,t,i);i.__tauid!=null&&(n.removeEventListener?n.removeEventListener(t,i,!1):this.detachEvent&&(r=t+i.__tauid,n[r]&&n.detachEvent("on"+t,n[r]),n[r]=null,n["e"+r]=null))})},ct=function(){},s=function(n,t){if(n!=null){n=typeof n!="string"&&n.tagName==null&&n.length!=null?n:typeof n=="string"?document.querySelectorAll(n):[n];for(var i=0;i<n.length;i++)t.apply(n[i])}};this.Mottle=function(i){i=i||{};var p=this,r=i.clickThreshold||150,f=i.dblClickThreshold||350,o=new rt,c=new it(r,f),v=i.smartClicks,y=function(t,i,r,f){r!=null&&s(t,function(){var t=u(this);v&&i==="click"?tt(t,i,r,f):i==="tap"||i==="dbltap"||i==="contextmenu"?c(t,i,r,f):i==="mouseenter"||i=="mouseexit"?o(t,i,r,f):n(t,i,r,f)})};this.remove=function(n){return s(n,function(){var n=u(this),t,i;if(n.__ta)for(t in n.__ta)for(i in n.__ta[t])l(n,t,n.__ta[t][i]);n.parentNode&&n.parentNode.removeChild(n)}),this};this.on=function(){var n=arguments[0],t=arguments.length==4?arguments[2]:null,i=arguments[1],r=arguments[arguments.length-1];return y(n,i,r,t),this};this.off=function(n,t,i){return l(n,t,i),this};this.trigger=function(n,i,r,f){var l=h&&t[i]?t[i]:i,v=e(r),o=et(r),c=ot(r);return s(n,function(){var e=u(this),n,s,p,w,y;r=r||{screenX:o[0],screenY:o[1],clientX:c[0],clientY:c[1]};s=function(n){f&&(n.payload=f)};p={TouchEvent:function(n){var t=document.createTouch(window,e,0,v[0],v[1],o[0],o[1],c[0],c[1],0,0,0,0);n.initTouchEvent(l,!0,!0,window,0,o[0],o[1],c[0],c[1],!1,!1,!1,!1,document.createTouchList(t))},MouseEvents:function(n){if(n.initMouseEvent(l,!0,!0,window,0,o[0],o[1],c[0],c[1],!1,!1,!1,!1,1,e),a.android){var t=document.createTouch(window,e,0,v[0],v[1],o[0],o[1],c[0],c[1],0,0,0,0);n.touches=n.targetTouches=n.changedTouches=document.createTouchList(t)}}};document.createEvent?(w=h&&t[i]&&!a.android,y=w?"TouchEvent":"MouseEvents",n=document.createEvent(y),p[y](n),s(n),e.dispatchEvent(n)):document.createEventObject&&(n=document.createEventObject(),n.eventType=n.eventName=l,n.screenX=o[0],n.screenY=o[1],n.clientX=c[0],n.clientY=c[1],s(n),e.fireEvent("on"+l,n))}),this}};Mottle.consume=function(n,t){n.stopPropagation?n.stopPropagation():n.returnValue=!1;!t&&n.preventDefault&&n.preventDefault()};Mottle.pageLocation=e}).call(this);
//# sourceMappingURL=mottle-0.4.min.js.map
