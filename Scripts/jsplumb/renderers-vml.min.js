(function(){"use strict";var p={"stroke-linejoin":"joinstyle",joinstyle:"joinstyle",endcap:"endcap",miterlimit:"miterlimit"},l=null,h,a,s,y,o,r;if(document.createStyleSheet&&document.namespaces){for(h=[".jsplumb_vml","jsplumb\\:textbox","jsplumb\\:oval","jsplumb\\:rect","jsplumb\\:stroke","jsplumb\\:shape","jsplumb\\:group"],a="behavior:url(#default#VML);position:absolute;",l=document.createStyleSheet(),s=0;s<h.length;s++)l.addRule(h[s],a);document.namespaces.add("jsplumb","urn:schemas-microsoft-com:vml")}jsPlumb.vml={};var t=1e3,f=function(n,t){for(var i in t)n[i]=t[i]},i=function(n,t,i,r,u,o){i=i||{};var s=document.createElement("jsplumb:"+n);return o?u.appendElement(s,r):r.appendChild(s),s.className=(i["class"]?i["class"]+" ":"")+"jsplumb_vml",e(s,t),f(s,i),s},e=function(n,t,i){n.style.left=t[0]+"px";n.style.top=t[1]+"px";n.style.width=t[2]+"px";n.style.height=t[3]+"px";n.style.position="absolute";i&&(n.style.zIndex=i)},n=jsPlumb.vml.convertValue=function(n){return Math.floor(n*t)},v=function(n,t,i,r){"transparent"===t?r.setOpacity(i,"0.0"):r.setOpacity(i,"1.0")},c=function(n,t,r,u){var e={},s,h,o;if(t.strokeStyle?(e.stroked="true",s=jsPlumbUtil.convertStyle(t.strokeStyle,!0),e.strokecolor=s,v(e,s,"stroke",r),e.strokeweight=t.lineWidth+"px"):e.stroked="false",t.fillStyle?(e.filled="true",h=jsPlumbUtil.convertStyle(t.fillStyle,!0),e.fillcolor=h,v(e,h,"fill",r)):e.filled="false",t.dashstyle)r.strokeNode==null?r.strokeNode=i("stroke",[0,0,0,0],{dashstyle:t.dashstyle},n,u):r.strokeNode.dashstyle=t.dashstyle;else if(t["stroke-dasharray"]&&t.lineWidth){var l=t["stroke-dasharray"].indexOf(",")==-1?" ":",",a=t["stroke-dasharray"].split(l),c="";for(o=0;o<a.length;o++)c+=Math.floor(a[o]/t.lineWidth)+l;r.strokeNode==null?r.strokeNode=i("stroke",[0,0,0,0],{dashstyle:c},n,u):r.strokeNode.dashstyle=c}f(n,e)},u=function(){var n=this,t;jsPlumb.jsPlumbUIComponent.apply(this,arguments);this.opacityNodes={stroke:null,fill:null};this.initOpacityNodes=function(t){n.opacityNodes.stroke=i("stroke",[0,0,1,1],{opacity:"0.0"},t,n._jsPlumb.instance);n.opacityNodes.fill=i("fill",[0,0,1,1],{opacity:"0.0"},t,n._jsPlumb.instance)};this.setOpacity=function(t,i){var r=n.opacityNodes[t];r&&(r.opacity=""+i)};t=[];this.getDisplayElements=function(){return t};this.appendDisplayElement=function(i,r){r||n.canvas.parentNode.appendChild(i);t.push(i)}};jsPlumbUtil.extend(u,jsPlumb.jsPlumbUIComponent,{cleanup:function(){this.bgCanvas&&this.bgCanvas.parentNode.removeChild(this.bgCanvas);this.canvas&&this.canvas.parentNode.removeChild(this.canvas)}});y=jsPlumb.ConnectorRenderers.vml=function(n,r){this.strokeNode=null;this.canvas=null;u.apply(this,arguments);var o=this._jsPlumb.instance.connectorClass+(n.cssClass?" "+n.cssClass:"");this.paint=function(u){var l,a;if(u!==null){this.w=Math.max(this.w,1);this.h=Math.max(this.h,1);var v=this.getSegments(),h={path:""},s=[this.x,this.y,this.w,this.h];for(l=0;l<v.length;l++)h.path+=jsPlumb.Segments.vml.SegmentRenderer.getPath(v[l]),h.path+=" ";if(u.outlineColor){var w=u.outlineWidth||1,b=u.lineWidth+2*w,y={strokeStyle:jsPlumbUtil.convertStyle(u.outlineColor),lineWidth:b};for(a in p)y[a]=u[a];this.bgCanvas==null?(h["class"]=o,h.coordsize=s[2]*t+","+s[3]*t,this.bgCanvas=i("shape",s,h,n.parent,this._jsPlumb.instance,!0),e(this.bgCanvas,s),this.appendDisplayElement(this.bgCanvas,!0),this.initOpacityNodes(this.bgCanvas,["stroke"]),this.bgCanvas._jsPlumb=r):(h.coordsize=s[2]*t+","+s[3]*t,e(this.bgCanvas,s),f(this.bgCanvas,h));c(this.bgCanvas,y,this)}this.canvas==null?(h["class"]=o,h.coordsize=s[2]*t+","+s[3]*t,this.canvas=i("shape",s,h,n.parent,this._jsPlumb.instance,!0),this.appendDisplayElement(this.canvas,!0),this.initOpacityNodes(this.canvas,["stroke"]),this.canvas._jsPlumb=r):(h.coordsize=s[2]*t+","+s[3]*t,e(this.canvas,s),f(this.canvas,h));c(this.canvas,u,this,this._jsPlumb.instance)}}};jsPlumbUtil.extend(y,u,{setVisible:function(n){this.canvas&&(this.canvas.style.display=n?"block":"none");this.bgCanvas&&(this.bgCanvas.style.display=n?"block":"none")}});o=window.VmlEndpoint=function(n){u.apply(this,arguments);this._jsPlumb.vml=null;this.canvas=document.createElement("div");this.canvas.style.position="absolute";this._jsPlumb.clazz=this._jsPlumb.instance.endpointClass+(n.cssClass?" "+n.cssClass:"");n._jsPlumb.appendElement(this.canvas,n.parent);this.paint=function(n,t){var r={},i=this._jsPlumb.vml;jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h);this._jsPlumb.vml==null?(r["class"]=this._jsPlumb.clazz,i=this._jsPlumb.vml=this.getVml([0,0,this.w,this.h],r,t,this.canvas,this._jsPlumb.instance),this.appendDisplayElement(i,!0),this.appendDisplayElement(this.canvas,!0),this.initOpacityNodes(i,["fill"])):(e(i,[0,0,this.w,this.h]),f(i,r));c(i,n,this)}};jsPlumbUtil.extend(o,u);jsPlumb.Segments.vml={SegmentRenderer:{getPath:function(t){return{Straight:function(t){var i=t.params;return"m"+n(i.x1)+","+n(i.y1)+" l"+n(i.x2)+","+n(i.y2)+" e"},Bezier:function(t){var i=t.params;return"m"+n(i.x1)+","+n(i.y1)+" c"+n(i.cp1x)+","+n(i.cp1y)+","+n(i.cp2x)+","+n(i.cp2y)+","+n(i.x2)+","+n(i.y2)+" e"},Arc:function(t){var i=t.params,r=Math.min(i.x1,i.x2),s=Math.max(i.x1,i.x2),u=Math.min(i.y1,i.y2),h=Math.max(i.y1,i.y2),f=t.anticlockwise?1:0,e=t.anticlockwise?"at ":"wa ",o=function(){if(i.loopback)return"0,0,"+n(2*i.r)+","+n(2*i.r);var e=[null,[function(){return[r,u]},function(){return[r-i.r,u-i.r]}],[function(){return[r-i.r,u]},function(){return[r,u-i.r]}],[function(){return[r-i.r,u-i.r]},function(){return[r,u]}],[function(){return[r,u-i.r]},function(){return[r-i.r,u]}]][t.segment][f]();return n(e[0])+","+n(e[1])+","+n(e[0]+2*i.r)+","+n(e[1]+2*i.r)};return e+" "+o()+","+n(i.x1)+","+n(i.y1)+","+n(i.x2)+","+n(i.y2)+" e"}}[t.type](t)}}};jsPlumb.Endpoints.vml.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments);o.apply(this,arguments);this.getVml=function(n,t,r,u,f){return i("oval",n,t,u,f)}};jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Dot,o);jsPlumb.Endpoints.vml.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments);o.apply(this,arguments);this.getVml=function(n,t,r,u,f){return i("rect",n,t,u,f)}};jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Rectangle,o);jsPlumb.Endpoints.vml.Image=jsPlumb.Endpoints.Image;jsPlumb.Endpoints.vml.Blank=jsPlumb.Endpoints.Blank;jsPlumb.Overlays.vml.Label=jsPlumb.Overlays.Label;jsPlumb.Overlays.vml.Custom=jsPlumb.Overlays.Custom;r=function(r,o){var s,c,h;r.apply(this,o);u.apply(this,o);s=this;c=null;this.canvas=null;this.isAppendedAtTopLevel=!0;h=function(t){return"m "+n(t.hxy.x)+","+n(t.hxy.y)+" l "+n(t.tail[0].x)+","+n(t.tail[0].y)+" "+n(t.cxy.x)+","+n(t.cxy.y)+" "+n(t.tail[1].x)+","+n(t.tail[1].y)+" x e"};this.paint=function(n,r){var p,w;if(n.component.canvas&&r){var c={},u=n.d,l=n.component;n.strokeStyle&&(c.stroked="true",c.strokecolor=jsPlumbUtil.convertStyle(n.strokeStyle,!0));n.lineWidth&&(c.strokeweight=n.lineWidth+"px");n.fillStyle&&(c.filled="true",c.fillcolor=n.fillStyle);var v=Math.min(u.hxy.x,u.tail[0].x,u.tail[1].x,u.cxy.x),y=Math.min(u.hxy.y,u.tail[0].y,u.tail[1].y,u.cxy.y),b=Math.max(u.hxy.x,u.tail[0].x,u.tail[1].x,u.cxy.x),k=Math.max(u.hxy.y,u.tail[0].y,u.tail[1].y,u.cxy.y),d=Math.abs(b-v),g=Math.abs(k-y),a=[v,y,d,g];c.path=h(u);c.coordsize=l.w*t+","+l.h*t;a[0]=l.x;a[1]=l.y;a[2]=l.w;a[3]=l.h;s.canvas==null?(p=l._jsPlumb.overlayClass||"",w=o&&o.length==1?o[0].cssClass||"":"",c["class"]=w+" "+p,s.canvas=i("shape",a,c,l.canvas.parentNode,l._jsPlumb.instance,!0),l.appendDisplayElement(s.canvas,!0)):(e(s.canvas,a),f(s.canvas,c))}};this.cleanup=function(){this.canvas!=null&&this._jsPlumb.instance.removeElement(this.canvas)}};jsPlumbUtil.extend(r,[u,jsPlumb.Overlays.AbstractOverlay],{setVisible:function(n){this.canvas.style.display=n?"block":"none"}});jsPlumb.Overlays.vml.Arrow=function(){r.apply(this,[jsPlumb.Overlays.Arrow,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.vml.Arrow,[jsPlumb.Overlays.Arrow,r]);jsPlumb.Overlays.vml.PlainArrow=function(){r.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.vml.PlainArrow,[jsPlumb.Overlays.PlainArrow,r]);jsPlumb.Overlays.vml.Diamond=function(){r.apply(this,[jsPlumb.Overlays.Diamond,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.vml.Diamond,[jsPlumb.Overlays.Diamond,r])})();
//# sourceMappingURL=renderers-vml.min.js.map
