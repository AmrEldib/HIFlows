(function(){"use strict";var r=function(n,t,i,r){this.m=(r-t)/(i-n);this.b=-1*(this.m*n-t);this.rectIntersect=function(n,t,i,r){var u=[],f,e,o,s,h,c;return(f=(t-this.b)/this.m,f>=n&&f<=n+i&&u.push([f,this.m*f+this.b]),e=this.m*(n+i)+this.b,e>=t&&e<=t+r&&u.push([(e-this.b)/this.m,e]),f=(t+r-this.b)/this.m,f>=n&&f<=n+i&&u.push([f,this.m*f+this.b]),e=this.m*n+this.b,e>=t&&e<=t+r&&u.push([(e-this.b)/this.m,e]),u.length==2)?(o=(u[0][0]+u[1][0])/2,s=(u[0][1]+u[1][1])/2,u.push([o,s]),h=o<=n+i/2?-1:1,c=s<=t+r/2?-1:1,u.push([h,c]),u):null}},n=function(n,t,i,r){return n<=i&&r<=t?1:n<=i&&t<=r?2:i<=n&&r>=t?3:4},t=function(n,t,i,r,u,f,e,o,s){return o<=s?[n,t]:i===1?r[3]<=0&&u[3]>=1?[n+(r[2]<.5?-1*f:f),t]:r[2]>=1&&u[2]<=0?[n,t+(r[3]<.5?-1*e:e)]:[n+-1*f,t+-1*e]:i===2?r[3]>=1&&u[3]<=0?[n+(r[2]<.5?-1*f:f),t]:r[2]>=1&&u[2]<=0?[n,t+(r[3]<.5?-1*e:e)]:[n+1*f,t+-1*e]:i===3?r[3]>=1&&u[3]<=0?[n+(r[2]<.5?-1*f:f),t]:r[2]<=0&&u[2]>=1?[n,t+(r[3]<.5?-1*e:e)]:[n+-1*f,t+-1*e]:i===4?r[3]<=0&&u[3]>=1?[n+(r[2]<.5?-1*f:f),t]:r[2]<=0&&u[2]>=1?[n,t+(r[3]<.5?-1*e:e)]:[n+1*f,t+-1*e]:void 0},i=function(i){i=i||{};this.type="StateMachine";var c=this,e=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),f=i.curviness||10,r=i.margin||5,o=i.proximityLimit||80,s=i.orientation&&i.orientation==="clockwise",u=i.loopbackRadius||25,h=i.showLoopback!==!1;this._compute=function(i,c){var nt=Math.abs(c.sourcePos[0]-c.targetPos[0]),tt=Math.abs(c.sourcePos[1]-c.targetPos[1]),lt=Math.min(c.sourcePos[0],c.targetPos[0]),at=Math.min(c.sourcePos[1],c.targetPos[1]);if(h&&c.sourceEndpoint.elementId===c.targetEndpoint.elementId){var d=c.sourcePos[0],pt=c.sourcePos[0],g=c.sourcePos[1]-r,wt=c.sourcePos[1]-r,ft=d,et=g-u,ht=2*u,ct=2*u,b=ft-u,k=et-u;i.points[0]=b;i.points[1]=k;i.points[2]=ht;i.points[3]=ct;e.addSegment(this,"Arc",{loopback:!0,x1:d-b+4,y1:g-k,startAngle:0,endAngle:2*Math.PI,r:u,ac:!s,x2:d-b-4,y2:g-k,cx:ft-b,cy:et-k})}else{var l=c.sourcePos[0]<c.targetPos[0]?0:nt,a=c.sourcePos[1]<c.targetPos[1]?0:tt,v=c.sourcePos[0]<c.targetPos[0]?nt:0,y=c.sourcePos[1]<c.targetPos[1]?tt:0;c.sourcePos[2]===0&&(l-=r);c.sourcePos[2]===1&&(l+=r);c.sourcePos[3]===0&&(a-=r);c.sourcePos[3]===1&&(a+=r);c.targetPos[2]===0&&(v-=r);c.targetPos[2]===1&&(v+=r);c.targetPos[3]===0&&(y-=r);c.targetPos[3]===1&&(y+=r);var it=(l+v)/2,rt=(a+y)/2,p=-1*it/rt,ut=Math.atan(p),vt=p==Infinity||p==-Infinity?0:Math.abs(f/2*Math.sin(ut)),yt=p==Infinity||p==-Infinity?0:Math.abs(f/2*Math.cos(ut)),ot=n(l,a,v,y),st=Math.sqrt(Math.pow(v-l,2)+Math.pow(y-a,2)),w=t(it,rt,ot,c.sourcePos,c.targetPos,f,f,st,o);e.addSegment(this,"Bezier",{x1:v,y1:y,x2:l,y2:a,cp1x:w[0],cp1y:w[1],cp2x:w[0],cp2y:w[1]})}}};jsPlumb.registerConnectorType(i,"StateMachine")})();
//# sourceMappingURL=connectors-statemachine.min.js.map
