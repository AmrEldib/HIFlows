(function(){"use strict";var h={joinstyle:"stroke-linejoin","stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},f="stroke-dasharray",o="dashstyle",c="linearGradient",l="radialGradient",a="defs",v="fill",d="stop",y="stroke",g="stroke-width",nt="style",p="none",tt="jsplumb_gradient_",it="lineWidth",w={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},t=function(n,t){for(var i in t)n.setAttribute(i,""+t[i])},n=function(n,i){var r=document.createElementNS(w.svg,n);return i=i||{},i.version="1.1",i.xmlns=w.xhtml,t(r,i),r},e=function(n){return"position:absolute;left:"+n[0]+"px;top:"+n[1]+"px"},b=function(n){for(var t=0;t<n.childNodes.length;t++)(n.childNodes[t].tagName==a||n.childNodes[t].tagName==c||n.childNodes[t].tagName==l)&&n.removeChild(n.childNodes[t])},rt=function(t,i,r,u,f){var o=tt+f._jsPlumb.instance.idstamp(),s,h,e,p;for(b(t),s=r.gradient.offset?n(l,{id:o}):n(c,{id:o,gradientUnits:"userSpaceOnUse"}),h=n(a),t.appendChild(h),h.appendChild(s),e=0;e<r.gradient.stops.length;e++){var w=f.segment==1||f.segment==2?e:r.gradient.stops.length-1-e,k=jsPlumbUtil.convertStyle(r.gradient.stops[w][1],!0),g=n(d,{offset:Math.floor(r.gradient.stops[e][0]*100)+"%","stop-color":k});s.appendChild(g)}p=r.strokeStyle?y:v;i.setAttribute(p,"url(#"+o+")")},s=function(n,t,i,r,u){var e;if(t.setAttribute(v,i.fillStyle?jsPlumbUtil.convertStyle(i.fillStyle,!0):p),t.setAttribute(y,i.strokeStyle?jsPlumbUtil.convertStyle(i.strokeStyle,!0):p),i.gradient?rt(n,t,i,r,u):(b(n),t.setAttribute(nt,"")),i.lineWidth&&t.setAttribute(g,i.lineWidth),i[o]&&i[it]&&!i[f]){var s=i[o].indexOf(",")==-1?" ":",",l=i[o].split(s),c="";l.forEach(function(n){c+=Math.floor(n*i.lineWidth)+s});t.setAttribute(f,c)}else i[f]&&t.setAttribute(f,i[f]);for(e in h)i[e]&&t.setAttribute(h[e],i[e])},ut=function(n){var t=n.match(/([0-9].)(p[xt])\s(.*)/);return{size:t[1]+t[2],font:t[3]}},k=function(n,t,i){n.childNodes.length>i?n.insertBefore(t,n.childNodes[i]):n.appendChild(t)},r,u,i;jsPlumbUtil.svg={node:n,attr:t,pos:e};r=function(i){var s=i.pointerEventsSpec||"all",f={},r,o,u;return jsPlumb.jsPlumbUIComponent.apply(this,i.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null,r=i.cssClass+" "+(i.originalArgs[0].cssClass||""),o={style:"",width:0,height:0,"pointer-events":s,position:"absolute"},this.svg=n("svg",o),i.useDivWrapper?(this.canvas=document.createElement("div"),this.canvas.style.position="absolute",jsPlumbUtil.sizeElement(this.canvas,0,0,1,1),this.canvas.className=r):(t(this.svg,{"class":r}),this.canvas=this.svg),i._jsPlumb.appendElement(this.canvas,i.originalArgs[0].parent),i.useDivWrapper&&this.canvas.appendChild(this.svg),u=[this.canvas],this.getDisplayElements=function(){return u},this.appendDisplayElement=function(n){u.push(n)},this.paint=function(n,r,u){if(n!=null){var o=[this.x,this.y],s=[this.w,this.h],h;u!=null&&(u.xmin<0&&(o[0]+=u.xmin),u.ymin<0&&(o[1]+=u.ymin),s[0]=u.xmax+(u.xmin<0?-u.xmin:0),s[1]=u.ymax+(u.ymin<0?-u.ymin:0));i.useDivWrapper?(jsPlumbUtil.sizeElement(this.canvas,o[0],o[1],s[0],s[1]),o[0]=0,o[1]=0,h=e([0,0])):h=e([o[0],o[1]]);f.paint.apply(this,arguments);t(this.svg,{style:h,width:s[0],height:s[1]})}},{renderer:f}};jsPlumbUtil.extend(r,jsPlumb.jsPlumbUIComponent,{cleanup:function(){this.canvas&&(this.canvas._jsPlumb=null);this.svg&&(this.svg._jsPlumb=null);this.bgCanvas&&(this.bgCanvas._jsPlumb=null);this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);this.svg=null;this.canvas=null;this.path=null;this.group=null},setVisible:function(n){this.canvas&&(this.canvas.style.display=n?"block":"none")}});jsPlumb.ConnectorRenderers.svg=function(i){var u=this,f=r.apply(this,[{cssClass:i._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:i._jsPlumb}]);f.renderer.paint=function(r,f,e){var a=u.getSegments(),v="",h=[0,0],c,p,w;if(e.xmin<0&&(h[0]=-e.xmin),e.ymin<0&&(h[1]=-e.ymin),a.length>0){for(c=0;c<a.length;c++)v+=jsPlumb.Segments.svg.SegmentRenderer.getPath(a[c]),v+=" ";var l={d:v,transform:"translate("+h[0]+","+h[1]+")","pointer-events":i["pointer-events"]||"visibleStroke"},o=null,y=[u.x,u.y,u.w,u.h];r.outlineColor&&(p=r.outlineWidth||1,w=r.lineWidth+2*p,o=jsPlumb.extend({},r),delete o.gradient,o.strokeStyle=jsPlumbUtil.convertStyle(r.outlineColor),o.lineWidth=w,u.bgPath==null?(u.bgPath=n("path",l),k(u.svg,u.bgPath,0)):t(u.bgPath,l),s(u.svg,u.bgPath,o,y,u));u.path==null?(u.path=n("path",l),k(u.svg,u.path,r.outlineColor?1:0)):t(u.path,l);s(u.svg,u.path,r,y,u)}}};jsPlumbUtil.extend(jsPlumb.ConnectorRenderers.svg,r);jsPlumb.Segments.svg={SegmentRenderer:{getPath:function(n){return{Straight:function(){var t=n.getCoordinates();return"M "+t.x1+" "+t.y1+" L "+t.x2+" "+t.y2},Bezier:function(){var t=n.params;return"M "+t.x1+" "+t.y1+" C "+t.cp1x+" "+t.cp1y+" "+t.cp2x+" "+t.cp2y+" "+t.x2+" "+t.y2},Arc:function(){var t=n.params,i=n.sweep>Math.PI?1:0,r=n.anticlockwise?0:1;return"M"+n.x1+" "+n.y1+" A "+n.radius+" "+t.r+" 0 "+i+","+r+" "+n.x2+" "+n.y2}}[n.type]()}}};u=window.SvgEndpoint=function(n){var t=r.apply(this,[{cssClass:n._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:n._jsPlumb}]);t.renderer.paint=function(n){var t=jsPlumb.extend({},n);t.outlineColor&&(t.strokeWidth=t.outlineWidth,t.strokeStyle=jsPlumbUtil.convertStyle(t.outlineColor,!0));this.node==null?(this.node=this.makeNode(t),this.svg.appendChild(this.node)):this.updateNode!=null&&this.updateNode(this.node);s(this.svg,this.node,t,[this.x,this.y,this.w,this.h],this);e(this.node,[this.x,this.y])}.bind(this)};jsPlumbUtil.extend(u,r);jsPlumb.Endpoints.svg.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments);u.apply(this,arguments);this.makeNode=function(){return n("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})};this.updateNode=function(n){t(n,{cx:this.w/2,cy:this.h/2,r:this.radius})}};jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Dot,[jsPlumb.Endpoints.Dot,u]);jsPlumb.Endpoints.svg.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments);u.apply(this,arguments);this.makeNode=function(){return n("rect",{width:this.w,height:this.h})};this.updateNode=function(n){t(n,{width:this.w,height:this.h})}};jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Rectangle,[jsPlumb.Endpoints.Rectangle,u]);jsPlumb.Endpoints.svg.Image=jsPlumb.Endpoints.Image;jsPlumb.Endpoints.svg.Blank=jsPlumb.Endpoints.Blank;jsPlumb.Overlays.svg.Label=jsPlumb.Overlays.Label;jsPlumb.Overlays.svg.Custom=jsPlumb.Overlays.Custom;i=function(i,r){var f,u;i.apply(this,r);jsPlumb.jsPlumbUIComponent.apply(this,r);this.isAppendedAtTopLevel=!1;f=this;this.path=null;this.paint=function(i,f){if(i.component.svg&&f){this.path==null&&(this.path=n("path",{"pointer-events":"all"}),i.component.svg.appendChild(this.path),this.canvas=i.component.svg);var o=r&&r.length==1?r[0].cssClass||"":"",e=[0,0];f.xmin<0&&(e[0]=-f.xmin);f.ymin<0&&(e[1]=-f.ymin);t(this.path,{d:u(i.d),"class":o,stroke:i.strokeStyle?i.strokeStyle:null,fill:i.fillStyle?i.fillStyle:null,transform:"translate("+e[0]+","+e[1]+")"})}};u=function(n){return"M"+n.hxy.x+","+n.hxy.y+" L"+n.tail[0].x+","+n.tail[0].y+" L"+n.cxy.x+","+n.cxy.y+" L"+n.tail[1].x+","+n.tail[1].y+" L"+n.hxy.x+","+n.hxy.y}};jsPlumbUtil.extend(i,[jsPlumb.jsPlumbUIComponent,jsPlumb.Overlays.AbstractOverlay],{cleanup:function(){this.path!=null&&this._jsPlumb.instance.removeElement(this.path)},setVisible:function(n){this.path!=null&&(this.path.style.display=n?"block":"none")}});jsPlumb.Overlays.svg.Arrow=function(){i.apply(this,[jsPlumb.Overlays.Arrow,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.svg.Arrow,[jsPlumb.Overlays.Arrow,i]);jsPlumb.Overlays.svg.PlainArrow=function(){i.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.svg.PlainArrow,[jsPlumb.Overlays.PlainArrow,i]);jsPlumb.Overlays.svg.Diamond=function(){i.apply(this,[jsPlumb.Overlays.Diamond,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.svg.Diamond,[jsPlumb.Overlays.Diamond,i]);jsPlumb.Overlays.svg.GuideLines=function(){var r=null,i=this,u,f,e;jsPlumb.Overlays.GuideLines.apply(this,arguments);this.paint=function(o,s){r==null&&(r=n("path"),o.connector.svg.appendChild(r),i.attachListeners(r,o.connector),i.attachListeners(r,i),u=n("path"),o.connector.svg.appendChild(u),i.attachListeners(u,o.connector),i.attachListeners(u,i),f=n("path"),o.connector.svg.appendChild(f),i.attachListeners(f,o.connector),i.attachListeners(f,i));var h=[0,0];s.xmin<0&&(h[0]=-s.xmin);s.ymin<0&&(h[1]=-s.ymin);t(r,{d:e(o.head,o.tail),stroke:"red",fill:null,transform:"translate("+h[0]+","+h[1]+")"});t(u,{d:e(o.tailLine[0],o.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+h[0]+","+h[1]+")"});t(f,{d:e(o.headLine[0],o.headLine[1]),stroke:"green",fill:null,transform:"translate("+h[0]+","+h[1]+")"})};e=function(n,t){return"M "+n.x+","+n.y+" L"+t.x+","+t.y}};jsPlumbUtil.extend(jsPlumb.Overlays.svg.GuideLines,jsPlumb.Overlays.GuideLines)})();
//# sourceMappingURL=renderers-svg.min.js.map
