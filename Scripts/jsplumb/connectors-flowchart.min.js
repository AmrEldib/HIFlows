(function(){"use strict";var n=function(n){this.type="Flowchart";n=n||{};n.stub=n.stub==null?30:n.stub;var t=this,u=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),h=n.midpoint==null?.5:n.midpoint,i=[],w=n.grid,y=n.alwaysRespectStubs,r=null,f=null,e=null,p,c=n.cornerRadius!=null?n.cornerRadius:0,o=function(n){return n<0?-1:n===0?0:1},s=function(n,t,i,r){if(f!=t||e!=i){var u=f==null?r.sx:f,s=e==null?r.sy:e,h=u==t?"v":"h",c=o(t-u),l=o(i-s);f=t;e=i;n.push([u,s,t,i,h,c,l])}},l=function(n){return Math.sqrt(Math.pow(n[0]-n[2],2)+Math.pow(n[1]-n[3],2))},a=function(n){var t=[];return t.push.apply(t,n),t},b=function(n){t.bounds.minX=Math.min(t.bounds.minX,n[2]);t.bounds.maxX=Math.max(t.bounds.maxX,n[2]);t.bounds.minY=Math.min(t.bounds.minY,n[3]);t.bounds.maxY=Math.max(t.bounds.maxY,n[3])},v=function(n,t,i){for(var e,v,y,r,f,s=0;s<t.length-1;s++){if(r=r||a(t[s]),f=a(t[s+1]),c>0&&r[4]!=f[4]){e=Math.min(c,l(r),l(f));r[2]-=r[5]*e;r[3]-=r[6]*e;f[0]+=f[5]*e;f[1]+=f[6]*e;var o=r[6]==f[5]&&f[5]==1||r[6]==f[5]&&f[5]===0&&r[5]!=f[6]||r[6]==f[5]&&f[5]==-1,p=f[1]>r[3]?1:-1,w=f[0]>r[2]?1:-1,h=p==w,b=h&&o||!h&&!o?f[0]:r[2],k=h&&o||!h&&!o?r[3]:f[1];u.addSegment(n,"Straight",{x1:r[0],y1:r[1],x2:r[2],y2:r[3]});u.addSegment(n,"Arc",{r:e,x1:r[2],y1:r[3],x2:f[0],y2:f[1],cx:b,cy:k,ac:o})}else v=r[2]==r[0]?0:r[2]>r[0]?i.lw/2:-(i.lw/2),y=r[3]==r[1]?0:r[3]>r[1]?i.lw/2:-(i.lw/2),u.addSegment(n,"Straight",{x1:r[0]-v,y1:r[1]-y,x2:r[2]+v,y2:r[3]+y});r=f}f!=null&&u.addSegment(n,"Straight",{x1:f[0],y1:f[1],x2:f[2],y2:f[3]})};this.setSegments=function(n){r=n};this.isEditable=function(){return!0};this.getOriginalSegments=function(){return r||i};this._compute=function(n,t){var w,b;if(t.clearEdits&&(r=null),r!=null){v(this,r,n);return}i=[];f=null;e=null;p=null;var o=n.startStubX+(n.endStubX-n.startStubX)*h,c=n.startStubY+(n.endStubY-n.startStubY)*h,et=function(n,t,i,r){return n+(t*(1-i)*r+u.maxStub)},k={x:[0,1],y:[1,0]},d=function(){return[n.startStubX,n.startStubY,n.endStubX,n.endStubY]},nt={perpendicular:d,orthogonal:d,opposite:function(t){var i=n,r=t=="x"?0:1,u={x:function(){return i.so[r]==1&&(i.startStubX>i.endStubX&&i.tx>i.startStubX||i.sx>i.endStubX&&i.tx>i.sx)||i.so[r]==-1&&(i.startStubX<i.endStubX&&i.tx<i.startStubX||i.sx<i.endStubX&&i.tx<i.sx)},y:function(){return i.so[r]==1&&(i.startStubY>i.endStubY&&i.ty>i.startStubY||i.sy>i.endStubY&&i.ty>i.sy)||i.so[r]==-1&&(i.startStubY<i.endStubY&&i.ty<i.startStubY||i.sy<i.endStubY&&i.ty<i.sy)}};return!y&&u[t]()?{x:[(n.sx+n.tx)/2,n.startStubY,(n.sx+n.tx)/2,n.endStubY],y:[n.startStubX,(n.sy+n.ty)/2,n.endStubX,(n.sy+n.ty)/2]}[t]:[n.startStubX,n.startStubY,n.endStubX,n.endStubY]}},tt={perpendicular:function(t){var i=n,h={x:[[i.startStubX,i.endStubX],null,[i.endStubX,i.startStubX]],y:[[i.startStubY,i.endStubY],null,[i.endStubY,i.startStubY]]},v={x:[[o,i.startStubY],[o,i.endStubY]],y:[[i.startStubX,c],[i.endStubX,c]]},y={x:[[i.endStubX,i.startStubY]],y:[[i.startStubX,i.endStubY]]},p={x:[[i.startStubX,i.endStubY],[i.endStubX,i.endStubY]],y:[[i.endStubX,i.startStubY],[i.endStubX,i.endStubY]]},w={x:[[i.startStubX,c],[i.endStubX,c],[i.endStubX,i.endStubY]],y:[[o,i.startStubY],[o,i.endStubY],[i.endStubX,i.endStubY]]},u={x:[i.startStubY,i.endStubY],y:[i.startStubX,i.endStubX]},b=k[t][0],f=k[t][1],e=i.so[b]+1,d=i.to[f]+1,s=i.to[f]==-1&&u[t][1]<u[t][0]||i.to[f]==1&&u[t][1]>u[t][0],l=h[t][e][0],a=h[t][e][1],r={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]}[t][e][d];return i.segment==r[3]||i.segment==r[2]&&s?v[t]:i.segment==r[2]&&a<l?y[t]:i.segment==r[2]&&a>=l||i.segment==r[1]&&!s?w[t]:i.segment==r[0]||i.segment==r[1]&&s?p[t]:void 0},orthogonal:function(t,i,r,u,f){var o=n,e={x:o.so[0]==-1?Math.min(i,u):Math.max(i,u),y:o.so[1]==-1?Math.min(i,u):Math.max(i,u)}[t];return{x:[[e,r],[e,f],[u,f]],y:[[r,e],[f,e],[f,u]]}[t]},opposite:function(i,r,f,e){var s=n,l={x:"y",y:"x"}[i],v={x:"height",y:"width"}[i],y=s["is"+i.toUpperCase()+"GreaterThanStubTimes2"],h;return t.sourceEndpoint.elementId==t.targetEndpoint.elementId?(h=f+(1-t.sourceEndpoint.anchor[l])*t.sourceInfo[v]+u.maxStub,{x:[[r,h],[e,h]],y:[[h,r],[h,e]]}[i]):!y||s.so[a]==1&&r>e||s.so[a]==-1&&r<e?{x:[[r,c],[e,c]],y:[[o,r],[o,e]]}[i]:s.so[a]==1&&r<e||s.so[a]==-1&&r>e?{x:[[o,s.sy],[o,s.ty]],y:[[s.sx,c],[s.tx,c]]}[i]:void 0}},l=nt[n.anchorOrientation](n.sourceAxis),a=n.sourceAxis=="x"?0:1,g=n.sourceAxis=="x"?1:0,it=l[a],rt=l[g],ut=l[a+2],ft=l[g+2];if(s(i,l[0],l[1],n),w=tt[n.anchorOrientation](n.sourceAxis,it,rt,ut,ft),w)for(b=0;b<w.length;b++)s(i,w[b][0],w[b][1],n);s(i,l[2],l[3],n);s(i,n.tx,n.ty,n);v(this,i,n)};this.getPath=function(){for(var t=null,f=null,e=[],o=r||i,u=0;u<o.length;u++){var n=o[u],s=n[4],h=s=="v"?3:2;t!=null&&f===s?t[h]=n[h]:(n[0]!=n[2]||n[1]!=n[3])&&(e.push({start:[n[0],n[1]],end:[n[2],n[3]]}),t=n,f=n[4])}return e};this.setPath=function(n){var t;for(r=[],t=0;t<n.length;t++){var i=n[t].start[0],f=n[t].start[1],u=n[t].end[0],e=n[t].end[1],s=i==u?"v":"h",h=o(u-i),c=o(e-f);r.push([i,f,u,e,s,h,c])}}};jsPlumbUtil.extend(n,jsPlumb.Connectors.AbstractConnector);jsPlumb.registerConnectorType(n,"Flowchart")})();
//# sourceMappingURL=connectors-flowchart.min.js.map
